{"ast":null,"code":"var _jsxFileName = \"E:\\\\paypal\\\\paypal\\\\client\\\\src\\\\components\\\\CheckoutBasket.js\";\nimport React, { Component } from \"react\";\nimport axios from \"axios\";\nimport jwt from \"jsonwebtoken\";\nimport Link from \"react-router-dom/es/Link\";\nimport CheckoutBasketTable from \"./CheckoutBasketTable\";\nimport { ACCESS_LEVEL_GUEST, ACCESS_LEVEL_ADMIN, SERVER_HOST } from \"../config/global_constants\";\nexport default class ShoppingCart extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      cart: [],\n      cars: []\n    };\n  }\n\n  componentDidMount() {\n    const token2 = jwt.decode(localStorage.token, {\n      algorithim: 'HS256'\n    });\n    console.log(token2.email);\n    console.log(token2.id);\n\n    if (localStorage.accessLevel > ACCESS_LEVEL_GUEST) {\n      axios.get(\"\".concat(SERVER_HOST, \"/users/\").concat(token2.id), {\n        headers: {\n          \"authorisation\": localStorage.token\n        }\n      }).then(res => {\n        console.log(token2.id);\n\n        if (res.data) {\n          if (res.data.errorMessage) {\n            console.log(res.data.errorMessage);\n          } else {\n            console.log(res.data);\n\n            if (res.data.cart != null) {\n              this.setState({\n                cart: res.data.cart\n              });\n              console.log(res.data.cart);\n            }\n          }\n        } else {\n          console.log(\"User Data Not Returned\");\n        }\n      });\n    }\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/ProductsPage\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    }, \"Basket\")), React.createElement(\"div\", {\n      className: \"table-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    }, React.createElement(CheckoutBasketTable, {\n      cars: this.state.cars,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60\n      },\n      __self: this\n    }), localStorage.accessLevel >= ACCESS_LEVEL_ADMIN ? React.createElement(\"div\", {\n      className: \"add-new-car\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }, React.createElement(Link, {\n      className: \"blue-button\",\n      to: \"/AddCar\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }, \"Add New Car\")) : null));\n  }\n\n}","map":{"version":3,"sources":["E:\\paypal\\paypal\\client\\src\\components\\CheckoutBasket.js"],"names":["React","Component","axios","jwt","Link","CheckoutBasketTable","ACCESS_LEVEL_GUEST","ACCESS_LEVEL_ADMIN","SERVER_HOST","ShoppingCart","constructor","props","state","cart","cars","componentDidMount","token2","decode","localStorage","token","algorithim","console","log","email","id","accessLevel","get","headers","then","res","data","errorMessage","setState","render"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,SAAf,QAA+B,OAA/B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,GAAP,MAAgB,cAAhB;AACA,OAAOC,IAAP,MAAiB,0BAAjB;AACA,OAAOC,mBAAP,MAAgC,uBAAhC;AACA,SAAQC,kBAAR,EAA4BC,kBAA5B,EAAgDC,WAAhD,QAAkE,4BAAlE;AAIA,eAAe,MAAMC,YAAN,SAA2BR,SAA3B,CACf;AAEIS,EAAAA,WAAW,CAACC,KAAD,EAAY;AACnB,UAAMA,KAAN;AACA,SAAKC,KAAL,GACI;AACIC,MAAAA,IAAI,EAAE,EADV;AAEIC,MAAAA,IAAI,EAAC;AAFT,KADJ;AAMH;;AAEDC,EAAAA,iBAAiB,GAAG;AAChB,UAAMC,MAAM,GAAGb,GAAG,CAACc,MAAJ,CAAWC,YAAY,CAACC,KAAxB,EAA8B;AAACC,MAAAA,UAAU,EAAC;AAAZ,KAA9B,CAAf;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAYN,MAAM,CAACO,KAAnB;AACAF,IAAAA,OAAO,CAACC,GAAR,CAAYN,MAAM,CAACQ,EAAnB;;AACA,QAAIN,YAAY,CAACO,WAAb,GAAyBnB,kBAA7B,EAAgD;AAE5CJ,MAAAA,KAAK,CAACwB,GAAN,WAAalB,WAAb,oBAAkCQ,MAAM,CAACQ,EAAzC,GAA+C;AAACG,QAAAA,OAAO,EAAC;AAAC,2BAAiBT,YAAY,CAACC;AAA/B;AAAT,OAA/C,EACKS,IADL,CACUC,GAAG,IAAI;AACTR,QAAAA,OAAO,CAACC,GAAR,CAAYN,MAAM,CAACQ,EAAnB;;AACA,YAAIK,GAAG,CAACC,IAAR,EAAa;AACT,cAAID,GAAG,CAACC,IAAJ,CAASC,YAAb,EAA0B;AACtBV,YAAAA,OAAO,CAACC,GAAR,CAAYO,GAAG,CAACC,IAAJ,CAASC,YAArB;AACH,WAFD,MAGI;AACAV,YAAAA,OAAO,CAACC,GAAR,CAAYO,GAAG,CAACC,IAAhB;;AACA,gBAAID,GAAG,CAACC,IAAJ,CAASjB,IAAT,IAAiB,IAArB,EAA0B;AACtB,mBAAKmB,QAAL,CAAc;AACVnB,gBAAAA,IAAI,EAACgB,GAAG,CAACC,IAAJ,CAASjB;AADJ,eAAd;AAIAQ,cAAAA,OAAO,CAACC,GAAR,CAAYO,GAAG,CAACC,IAAJ,CAASjB,IAArB;AACH;AACJ;AACJ,SAdD,MAcK;AACDQ,UAAAA,OAAO,CAACC,GAAR,CAAY,wBAAZ;AACH;AACJ,OApBL;AAqBH;AACJ;;AAEDW,EAAAA,MAAM,GACN;AAEI,WACI;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI,oBAAC,IAAD;AAAO,MAAA,EAAE,EAAE,eAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAA6B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAA7B,CADJ,EAEI;AAAK,MAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI,oBAAC,mBAAD;AAAqB,MAAA,IAAI,EAAE,KAAKrB,KAAL,CAAWE,IAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,EAIQI,YAAY,CAACO,WAAb,IAA4BlB,kBAA5B,GACM;AAAK,MAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,IAAD;AAAM,MAAA,SAAS,EAAC,aAAhB;AAA8B,MAAA,EAAE,EAAE,SAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBADF,CADN,GAIM,IARd,CAFJ,CADJ;AAiBH;;AA9DL","sourcesContent":["import React, {Component} from \"react\"\r\nimport axios from \"axios\"\r\nimport jwt from \"jsonwebtoken\";\r\nimport Link from \"react-router-dom/es/Link\";\r\nimport CheckoutBasketTable from \"./CheckoutBasketTable\";\r\nimport {ACCESS_LEVEL_GUEST, ACCESS_LEVEL_ADMIN, SERVER_HOST} from \"../config/global_constants\"\r\n\r\n\r\n\r\nexport default class ShoppingCart extends Component\r\n{\r\n\r\n    constructor(props)     {\r\n        super(props);\r\n        this.state =\r\n            {\r\n                cart: [],\r\n                cars:[]\r\n\r\n            }\r\n    }\r\n\r\n    componentDidMount() {\r\n        const token2 = jwt.decode(localStorage.token,{algorithim:'HS256'})\r\n        console.log(token2.email)\r\n        console.log(token2.id)\r\n        if (localStorage.accessLevel>ACCESS_LEVEL_GUEST){\r\n\r\n            axios.get(`${SERVER_HOST}/users/${token2.id}`, {headers:{\"authorisation\": localStorage.token}})\r\n                .then(res => {\r\n                    console.log(token2.id)\r\n                    if (res.data){\r\n                        if (res.data.errorMessage){\r\n                            console.log(res.data.errorMessage)\r\n                        }\r\n                        else{\r\n                            console.log(res.data)\r\n                            if (res.data.cart != null){\r\n                                this.setState({\r\n                                    cart:res.data.cart\r\n\r\n                                })\r\n                                console.log(res.data.cart)\r\n                            }\r\n                        }\r\n                    }else{\r\n                        console.log(\"User Data Not Returned\")\r\n                    }\r\n                })\r\n        }\r\n    }\r\n\r\n    render()\r\n    {\r\n\r\n        return (\r\n            <div className=\"container\">\r\n                <Link  to={\"/ProductsPage\"} ><h1>Basket</h1></Link>\r\n                <div className=\"table-container\">\r\n                    <CheckoutBasketTable cars={this.state.cars} />\r\n\r\n                    {\r\n                        localStorage.accessLevel >= ACCESS_LEVEL_ADMIN\r\n                            ? <div className=\"add-new-car\">\r\n                                <Link className=\"blue-button\" to={\"/AddCar\"}>Add New Car</Link>\r\n                            </div>\r\n                            : null\r\n                    }\r\n                </div>\r\n            </div>\r\n\r\n        )\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}