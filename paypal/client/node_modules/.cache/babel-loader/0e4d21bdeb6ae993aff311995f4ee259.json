{"ast":null,"code":"var _jsxFileName = \"E:\\\\paypal\\\\paypal\\\\client\\\\src\\\\components\\\\CheckoutBasket.js\";\nimport React, { Component } from \"react\";\nimport { Redirect, Link } from \"react-router-dom\";\nimport axios from \"axios\";\nimport cartTable from \"./cartTable\";\nimport LinkInClass from \"../components/LinkInClass\";\nimport { ACCESS_LEVEL_ADMIN, ACCESS_LEVEL_GUEST, SERVER_HOST } from \"../config/global_constants\";\nimport jwt from \"jsonwebtoken\";\nimport CarTable from \"./CarTable\";\nimport Logout from \"./Logout\";\nexport default class ShoppingCart extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      totalQTY: null,\n      totalPrice: null,\n      isShoppingIn: false,\n      wasSubmittedAtLeastOnce1: false\n    };\n  }\n\n  componentDidMount() {\n    const token2 = jwt.decode(localStorage.token, {\n      algorithimn: 'HS256'\n    });\n\n    if (localStorage.accessLevel > ACCESS_LEVEL_GUEST) {\n      axios.get(\"\".concat(SERVER_HOST, \"/users/\").concat(token2.id), {\n        headers: {\n          \"authorisation\": localStorage.token\n        }\n      }).then(res => {\n        console.log(res.data);\n\n        if (res.data) {\n          if (res.data.errorMessage) {\n            console.log(res.data.errorMessage);\n          } else {\n            console.log(res.data);\n\n            if (res.data.cart != null) {\n              this.setState({\n                cart: res.data.cart\n              });\n            }\n          }\n        } else {\n          console.log(\"User Data Not Returned\");\n        }\n      });\n    }\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54\n      },\n      __self: this\n    }, localStorage.accessLevel > ACCESS_LEVEL_GUEST ? React.createElement(\"div\", {\n      className: \"logout\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57\n      },\n      __self: this\n    }, localStorage.cart !== \"null\" ? React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61\n      },\n      __self: this\n    }, \"Hello \", this.props.user.cart) : null, React.createElement(Logout, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    })) : React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }, React.createElement(Link, {\n      className: \"green-button\",\n      to: \"/Login\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }, \"Login\"), React.createElement(Link, {\n      className: \"blue-button\",\n      to: \"/Register\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }, \"Register\"), \"  \", React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    })));\n  }\n\n}","map":{"version":3,"sources":["E:\\paypal\\paypal\\client\\src\\components\\CheckoutBasket.js"],"names":["React","Component","Redirect","Link","axios","cartTable","LinkInClass","ACCESS_LEVEL_ADMIN","ACCESS_LEVEL_GUEST","SERVER_HOST","jwt","CarTable","Logout","ShoppingCart","constructor","props","state","totalQTY","totalPrice","isShoppingIn","wasSubmittedAtLeastOnce1","componentDidMount","token2","decode","localStorage","token","algorithimn","accessLevel","get","id","headers","then","res","console","log","data","errorMessage","cart","setState","render","user"],"mappings":"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","sourcesContent":["import React, {Component} from \"react\"\r\nimport {Redirect, Link} from \"react-router-dom\"\r\nimport axios from \"axios\"\r\nimport cartTable from \"./cartTable\";\r\nimport LinkInClass from \"../components/LinkInClass\"\r\nimport {ACCESS_LEVEL_ADMIN, ACCESS_LEVEL_GUEST, SERVER_HOST} from \"../config/global_constants\"\r\nimport jwt from \"jsonwebtoken\";\r\nimport CarTable from \"./CarTable\";\r\nimport Logout from \"./Logout\";\r\n\r\n\r\nexport default class ShoppingCart extends Component\r\n{\r\n    user;\r\n    constructor(props)\r\n    {\r\n        super(props)\r\n\r\n        this.state = {\r\n            totalQTY:null,\r\n            totalPrice:null,\r\n            isShoppingIn:false,\r\n            wasSubmittedAtLeastOnce1:false\r\n        }\r\n    }\r\n    componentDidMount() {\r\n        const token2 = jwt.decode(localStorage.token,{algorithimn:'HS256'})\r\n        if (localStorage.accessLevel>ACCESS_LEVEL_GUEST){\r\n            axios.get(`${SERVER_HOST}/users/${token2.id}`, {headers:{\"authorisation\": localStorage.token}})\r\n                .then(res => {\r\n                    console.log(res.data)\r\n                    if (res.data){\r\n                        if (res.data.errorMessage){\r\n                            console.log(res.data.errorMessage)\r\n                        }\r\n                        else{\r\n                            console.log(res.data)\r\n                            if (res.data.cart != null){\r\n                                this.setState({\r\n                                    cart:res.data.cart\r\n                                })\r\n                            }\r\n                        }\r\n                    }else{\r\n                        console.log(\"User Data Not Returned\")\r\n                    }\r\n                })\r\n        }\r\n    }\r\n\r\n    render()\r\n    {\r\n        return (\r\n            <div >\r\n                {\r\n                    localStorage.accessLevel > ACCESS_LEVEL_GUEST\r\n                        ? <div className=\"logout\">\r\n                            {\r\n\r\n                                localStorage.cart !== \"null\"\r\n                                    ? <div>Hello {this.props.user.cart}</div>\r\n                                    : null\r\n\r\n                            }\r\n                            <Logout/>\r\n                        </div>\r\n                        : <div>\r\n                            <Link className=\"green-button\" to={\"/Login\"}>Login</Link>\r\n                            <Link className=\"blue-button\" to={\"/Register\"}>Register</Link>  <br/><br/><br/></div>\r\n                }\r\n\r\n            </div>\r\n\r\n        )\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}